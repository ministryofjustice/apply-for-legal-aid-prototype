{% extends "layout.html" %}
{% from "govuk/components/phase-banner/macro.njk"  import govukPhaseBanner %}
{% from "govuk/components/footer/macro.njk" import govukFooter %}

{% block pageTitle %}
Apply for legal aid - Homepage
{% endblock %}

{% block beforeContent %}
{{ govukPhaseBanner({
  tag: {
    text: "prototype"
  },
  html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
}) }}


{% endblock %}

{% block content %}
<style media="screen">
.govuk-checkboxes--small .govuk-checkboxes__label::before{
  /*top: 10px;
  left: 9px;
  width: 24px;
  height: 24px;*/
}
.govuk-checkboxes--small .govuk-checkboxes__label{
  padding-left: 30px;
  padding-top: 4px;
  padding-bottom: 0px;
}

.moj-badge{
  text-transform: none;
  font-size: 16px;
  letter-spacing: 0.5px;
}

table .govuk-tag {
  white-space: nowrap;
  color: white;
  background-color: #85994b;
  border: 2px solid #85994b;
  font-weight: 700;
  font-size: 16px;
  text-transform: none;
}
.inprogress{
  background-color: #005ea5 !important;
  border-color: #005ea5 !important;
}
.granted{
  background-color: #0b0c0c !important;
  border-color: #0b0c0c !important;
}

.col_bespoke{
  width:auto;
}
.govuk-table__header{
  color: #0b0c0c;
  /*background-color: #dee0e2;*/
  background-color: #f3f2f1;
  border: 1px solid #bfc1c3;
  box-shadow: 0 2px 0 #b5babe;
  padding-left: 10px;
  text-align: left;
  font-weight: 100;
}
.th_bespoke{
  padding-right: 15px;
  position: relative;
}
.th_bespoke::before{
  /*down*/
  content:" \25bc";
  position: absolute;
  right: -1px;
  top: 11px;
  font-size: 0.6em;
}
.th_bespoke::after{
  /*up*/
  content:" \25b2";
  position: absolute;
  right: -1px;
  top: 1px;
  font-size: 0.6em;
}
.th_bespoke_hover:hover{
  background-color: #c8cacb;
  cursor:pointer;
}
.govuk-table__head{
  position: relative;
}
.govuk-table__cell{
  padding-left: 10px;
}

/* Dan's styles */

.dialog-overlay {
	z-index: 2;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0,0,0,0.7);
}
.dialog {
	z-index: 3;
	background-color: #fff;
	padding: 30px;
	text-align: left;
	width: 90%;
	max-width: 400px;
	position: fixed;
  border: 5px solid black;
	top: 50%;
	left: 50%;
	transform: translate(-50%,-50%);
}
.hide,
.dialog-overlay[aria-hidden="true"],
.dialog[aria-hidden="true"] {
	display: none;
}
.dialog-overlay:not([aria-hidden="true"]),
.dialog:not([aria-hidden="true"]) {
	display: block;
}

</style>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-xl">Your applications</h1>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
  <!--  <h2 class="govuk-heading-m">Make an application</h2>
    <p class="govuk-body">Tell us the basic case details and we'll check if your client can get legal aid.</p> -->

    <a href="declaration_provider" class="govuk-button govuk-button--start">
      Make a new application
    </a>

  </div>

</div>

<div class="govuk-!-padding-top-6"></div>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h3 class="govuk-heading-m">Current applications &nbsp;
      <!-- <a href="search" class="govuk-button govuk-button--secondary" style="background-color:#dee0e2; color:#0b0c0c; display:inline; margin:0px 0px 20px 30px">
      <img src="/public/images/search_icon.svg" alt="" style="height:24px; margin:0px 0px 0px 0px !important; position:relative; top:5px" />
      <span >Search applications</span></a> -->
      <button class="govuk-button govuk-button--secondary govuk-!-margin-bottom-1" data-module="govuk-button">
        Search applications
      </button>
    </h3>
  </div>

  <!-- <div class="govuk-!-padding-top-3"></div> -->
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <table class="govuk-table">



        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th class="govuk-table__header th_bespoke_hover col_bespoke" scope="col"><span class="th_bespoke">Name</span>
            </th>
            <th class="govuk-table__header th_bespoke_hover col_bespoke" scope="col">Start date <img src="/public/images/filter_icon.svg" style=""></th>
            <th class="govuk-table__header th_bespoke_hover" style="width:auto" scope="col"><span class="th_bespoke">LAA reference</span></th>
            <!-- <th class="govuk-table__header th_bespoke_hover" style="width:auto" scope="col"><span class="th_bespoke">CCMS Ref</span></th> -->
            <th class="govuk-table__header th_bespoke_hover" style="width:auto" scope="col"><span class="th_bespoke">Certificate type</span></th>
            <th class="govuk-table__header th_bespoke_hover col_bespoke govuk-table__cell--numeric"  scope="col"><span  class="th_bespoke">Status</span></th>
          <th scope="col" class="govuk-table__header">Action</th>
        </tr>
        </thead>

        <tbody class="govuk-table__body">

          <tr class="govuk-table__row">
            <td class="govuk-table__cell"><a href="online_banking_radios">David Francis</a></td>
            <td class="govuk-table__cell">19 Mar 2019</td>
            <td class="govuk-table__cell">L-123-ABC</td>
            <!-- <td class="govuk-table__cell">123456789012</td> -->
            <td class="govuk-table__cell">Substantive</td>
            <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="moj-badge moj-badge--blue">
              In progress
            </strong></td>
            <td class="govuk-table__cell">
              <a href=# class="govuk-button govuk-button--secondary">
                Delete
              </a>
            </td>

          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell"><a href="">Gwen McCrae</a></td>
            <td class="govuk-table__cell">19 Mar 2019</td>
            <td class="govuk-table__cell">L-123-ABC</td>
            <!-- <td class="govuk-table__cell">123456789012</td> -->
            <td class="govuk-table__cell">Substantive</td>
            <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="moj-badge moj-badge--blue">
              In progress
            </strong></td>
            <td class="govuk-table__cell"><button class="govuk-button govuk-button--secondary" data-module="govuk-button" href="01_delete">Delete</button></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell"><a href="">Patrice Sokda</a></td>
            <td class="govuk-table__cell">19 Mar 2019</td>
            <td class="govuk-table__cell">L-123-ABC</td>
            <!-- <td class="govuk-table__cell">123456789012</td> -->
            <td class="govuk-table__cell">Emergency<br><span class="govuk-body-s">Substantive due on 12 December 2019</span></td>
            <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="moj-badge moj-badge--green">
              Submitted
            </strong></td>
            <td class="govuk-table__cell"></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell"><a href="">Rita Patel</a></td>
            <td class="govuk-table__cell">18 Mar 2019</td>
            <td class="govuk-table__cell">L-123-ABC</td>
            <!-- <td class="govuk-table__cell">123456789012</td> -->
            <td class="govuk-table__cell">Substantive</td>
            <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="moj-badge moj-badge--green">
              Submitted
            </strong></td>
            <td class="govuk-table__cell"></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell"><a href="">Steve Smith</a></td>
            <td class="govuk-table__cell">17 Mar 2019</td>
            <td class="govuk-table__cell">L-123-ABC</td>
            <!-- <td class="govuk-table__cell">123456789012</td> -->
            <td class="govuk-table__cell">Substantive</td>
            <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="moj-badge moj-badge--blue">
              In progress
            </strong></td>
            <td class="govuk-table__cell">
              <a href="#" onclick="showModal()" class="govuk-button govuk-button--secondary" style="float:right;">
                Delete
              </a>
          </td>
          </tr>
          <!-- <tr class="govuk-table__row">
          <td class="govuk-table__cell"><a href="">Patty LaBelle</a></td>
          <td class="govuk-table__cell">17 Mar 2019</td>
          <td class="govuk-table__cell">L-123-ABC</td>
          <td class="govuk-table__cell">123456789012</td>
          <td class="govuk-table__cell">Substantive</td>
          <td class="govuk-table__cell govuk-table__cell--numeric"><strong class="govuk-tag granted">
          Granted
        </strong></td>
      </tr> -->

    </tbody>
  </table>
</div>
</div>

<nav class="moj-pagination" id="pagination-label">

  <p class="govuk-visually-hidden" aria-labelledby="pagination-label">Pagination navigation</p>

  <ul class="moj-pagination__list">
    <li class="moj-pagination__item  moj-pagination__item--prev">
      <a class="moj-pagination__link" href="">Previous<span class="govuk-visually-hidden"> set of pages</span></a>
    </li>

    <li class="moj-pagination__item"><a class="moj-pagination__link" href="/page=1">1</a></li>

    <li class="moj-pagination__item moj-pagination__item--active">2</li>

    <li class="moj-pagination__item"><a class="moj-pagination__link" href="/page=3">3</a></li>

    <li class="moj-pagination__item  moj-pagination__item--next">
      <a class="moj-pagination__link" href="">Next<span class="govuk-visually-hidden"> set of pages</span></a>
    </li>
  </ul>
  <p class="moj-pagination__results">Showing <b>10</b> to <b>20</b> of <b>30</b> results</p>
</nav>

<div id="dialog"
    class="hide"
    role="dialog"
    aria-labelledby="dialog-title"
    aria-describedby="dialog-description"
    aria-modal="true">
  <div tabindex="0" class="dialog-focus"></div>
  <h3 id="dialog-title" class="govuk-heading-m">Are you sure you want to delete this application?</h3>
  <p class="govuk-body"><strong>Name:</strong> Steve Smith<br>
    <strong>LAA reference:</strong> L-123-ABC</p>

    <div class="govuk-warning-text">
  <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
  <strong class="govuk-warning-text__text">
    <span class="govuk-warning-text__assistive">Warning</span>
    You cannot undo this action.
  </strong>
</div>
  <a class="govuk-button govuk-button--warning govuk-!-margin-bottom-1" data-module="govuk-button" href="01_dashboard_deleted">
    Yes, delete it
  </a>
  <button class="govuk-button govuk-!-margin-bottom-1 govuk-!-margin-right-1"  onclick="hideModal()" aria-label="Close Navigation" class="close-dialog" data-module="govuk-button">
    No, do not delete it
  </button>
</div>
<div id="dialog-overlay" class="hide" tabindex="-1" onclick="hideModal()"></div>


<script type="text/javascript">
  // New Modal counter
  var dialog = document.getElementById("dialog")
  var dialogOverlay = document.getElementById("dialog-overlay");
  function trapFocus(element) {
      // Get all focussable elements in dialog box
      var focusableEls = element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),
          firstFocusableEl = focusableEls[0];
          lastFocusableEl = focusableEls[focusableEls.length - 1];
          KEYCODE_TAB = 9;
          KEYCODE_ESC = 27;
      // Set initial focus to be a empty div to gain focus within the dialog
      element.querySelector('.dialog-focus').focus();
      // Track Tab event and trap the focus to only elements within the dialog
      // Also track ESC key for closing the window
      element.addEventListener('keydown', function(e) {
        var isTabPressed = (e.key === 'Tab' || e.keyCode === KEYCODE_TAB);
        var isEscPressed = (e.key === 'Esc' || e.keyCode === KEYCODE_ESC);
        if (!isTabPressed && !isEscPressed) {
            return;
        }
        if (isTabPressed) {
          if ( e.shiftKey ) /* shift + tab */ {
              if (document.activeElement === firstFocusableEl) {
                  lastFocusableEl.focus();
                  e.preventDefault();
              }
          } else /* tab */ {
              if (document.activeElement === lastFocusableEl) {
                  firstFocusableEl.focus();
                  e.preventDefault();
              }
          }
        }
        if (isEscPressed) {
          hideModal();
        }
    });
  }
  // toggle dialog and overlay classes
  function toggleDialog() {
  	dialog.classList.toggle("dialog");
  	dialog.classList.toggle("hide");
    dialogOverlay.classList.toggle("hide");
    dialogOverlay.classList.toggle("dialog-overlay");
  }
  // show Modal dialog
  function showModal() {
    toggleDialog();
    trapFocus(dialog);
    startCount();
  };
  // hide Modal dialog
  function hideModal() {
    toggleDialog();
    stopCount();
  }
</script>

{% endblock %}

{% block footer %}
{{ govukFooter({
  meta: {
    items: [
    {
      href: "#",
      text: "Contact"
    },
    {
      href: "#",
      text: "Feedback"
    },
    {
      href: "https://www.gov.uk/help/cookies",
      text: "Cookies"
    },
    {
      href: "https://www.gov.uk/government/publications/laa-online-portal-help-and-information",
      text: "Terms and conditions"
    },
    {
      href: "https://mojdigital.blog.gov.uk/",
      text: "MOJ Digital Services"
    },
    {
      href: "/prototype-admin/clear-data",
      text: "Clear data"
    }
    ]
  }
}) }}
{% endblock %}
